
# Check if GPU is available
device = torch.device("cuda" if torch.cuda.is_available() else "cpu")

# Move the model to the appropriate device
model.to(device)

# Move the input tensors to the appropriate device
inputs_gpu = {key: tensor.to(device) for key, tensor in inputs.items()}

# Perform depth estimation
with torch.no_grad():
    outputs = model(**inputs_gpu)
    predicted_depth = outputs.predicted_depth


 Time Step   roi  Time (s)  Mean Depth  Trend
0          0  None      80.0    8.336488      0
   Time Step   roi  Time (s)  Mean Depth  Trend
0          0  None      80.0    8.336488      0
   Time Step    roi  Time (s)  Mean Depth  Trend
0          1  roi_1      80.0    8.332146      0
   Time Step   roi  Time (s)  Mean Depth  Trend
0          0  None      80.0    8.336488      0
   Time Step    roi  Time (s)  Mean Depth  Trend
0          1  roi_1      80.0    8.332146      0
   Time Step    roi  Time (s)  Mean Depth     Trend
0          2  roi_2     160.0    8.336878  0.059152
   Time Step   roi  Time (s)  Mean Depth  Trend
0          0  None      80.0    8.336488      0
   Time Step    roi  Time (s)  Mean Depth  Trend


# Initialize an empty list to store DataFrames
df_list = []

# Your loop to generate DataFrames goes here
for each_iteration:
    # Generate each DataFrame and append it to df_list
    df_list.append(new_df)

# Concatenate DataFrames and filter out rows where 'roi' is 'None'
final_df = pd.concat([df[df['roi'] != 'None'] for df in df_list], ignore_index=True)

# Save final_df to CSV
final_df.to_csv('output.csv', index=False)


FROM nvidia/cuda:12.3.2-base-ubuntu22.04
ENV DEBIAN_FRONTEND=noninteractive

RUN apt-get update
RUN apt-get install -y git
RUN apt-get install -y python3.11-dev # Python 3.11 specific items 
RUN apt-get install -y python3-opencv python3-pip 
RUN apt-get install -y libglib2.0-0 # Others

COPY . /home/bhamilton/scripts/depth_anything_special

WORKDIR /home/bhamilton/scripts/depth_anything_special

#COPY requirements.txt /home/bhamilton/scripts/depth_anything_special/requirements.txt

RUN python3 -m pip install -r requirements.txt
RUN python3 -m pip install --upgrade pip


RUN pip3 install torch torchvision torchaudio --index-url https://download.pytorch.org/whl/cu121



ENTRYPOINT ["python3", "main.py"]

ERROR [ 9/11] RUN python3 -m pip install -r requirements.txt                                                   1.0s
------
 > [ 9/11] RUN python3 -m pip install -r requirements.txt:
#13 0.942 ERROR: Could not open requirements file: [Errno 2] No such file or directory: 'requirements.txt'
------
executor failed running [/bin/sh -c python3 -m pip install -r requirements.txt]: exit code: 1
